library(dplyr)


subject <- c(3011,3040,3041,3042,3045,3050,3051,3056,3057,3058,3059,3060,3061,3062,3063,3066,3067,3069,3070,3071,3072,3073,3075,3076,3077,3078,3079,3080,3081,3082,3083,3085,3086,3087,3089,3091,3093,3094,3095,3096,3097,3098,3100,3103,3104,3106,3107,3108,3110,3112,3114,3117,3123,3126,3127,3128,3129,3132,3134,3137,3138,3139,3141,3142,3145,3148,3149,3150,3152,3153,3157,3160,3163,3164,3165,3166,3168,3169,3171,3173,3175,3176,3177,3181,3183,3185,3186,3187,3188,3192,3195,3197,3200,3203,3205,3206,3207,3208,3003,3004,3005,3006,3009,3013,3016,3018,3022,3023,3024,3025,3026,3027,3029,3030,3031,3034,3036,3039,4101)
session1 <- c(60913814,64069714,64182514,64184914,64066514,64559714,64444714,64558514,64459014,64744514,64977014,64645914,64572314,64747014,65047514,64975114,64990514,65147714,65060914,65076014,60223115,65062714,65248914,60093215,60527515,60498815,60628415,60483615,60512015,60597115,60595615,60700715,60540315,60585615,60926915,61045415,60801315,60712915,60743615,60900715,60930815,61027015,61348315,61231215,61290115,61017415,61333815,61230315,61491515,61346915,61388015,61535415,61705915,61895515,61835415,61822415,61907115,63764115,63937815,63853815,63739515,63710315,64040415,63825815,64012615,64128115,64153315,64154215,63868015,64069515,64356315,64573115,64457015,64917015,64632215,64470115,65050315,64859015,64948715,64861115,65061515,60511116,60585716,60667716,60683216,60815816,60700916,60900316,60898816,61101116,61636716,61680116,61835516,61722516,61823616,61837616,61924316,61936216,60844114,60642114,60730114,61218714,60946214,61230414,61319014,61434514,61145414,61432614,61722814,61549914,61521914,61535914,61620714,61750814,61721914,61822714,61763914,62369814,64874513)
session2 <- c(63029716,63910816,63851916,64024516,64717816,64545416,64011316,60456218,64242716,64700716,64297016,64196816,64398916,64717016,64646416,64627516,65121516,65032816,60050017,65048916,61475617,60741017,65248516,60079817,60283617,61190518,60354917,60355717,60341017,60396517,60398517,60571417,60265717,60768617,60453917,61275217,60698417,60583817,61305217,60988317,60802017,60498217,61261817,61403417,61245117,61505117,61664017,60984417,61446617,61161817,61086617,61547717,61894117,61648117,61795217,61750617,61751417,63865017,64211417,63969917,63822917,64125517,64012317,63811517,64210317,64501317,64314817,64167517,64171217,64299817,64429917,64603417,64890617,65107417,64616717,65019917,64991717,60325218,64270717,64816617,65017217,61290118,60729218,60655918,60827918,61186218,61448818,61387518,61432718,61274718,61868218,61434418,61781018,61778918,61838218,61877718,61792018,61862818,60307416,64947415,60324616,60888016,60628816,61217016,60974516,61490816,60928116,60595916,61333816,61531916,61232316,61476616,61795416,61417116,61736216,61822616,61894516,61895416,65074215)


for (i in 1:length(subject)) {
  confound <- read.table(file = paste0("/Shared/oleary/functional/UICL/BIDS/derivatives/fmriprep/rest_time2/fmriprep/sub-",subject[i],"/ses-",session1[i],"/func/sub-",subject[i],"_ses-",session1[i],"_task-rest_desc-confounds_regressors.tsv"), header = T, stringsAsFactors = F)
  confound$framewise_displacement <- as.numeric(confound$framewise_displacement)
  mean.fd <- mean(confound$framewise_displacement, na.rm = T)
  id <- subject[i]
  ses <- session1[i]
  df <- data.frame(id, ses, mean.fd)
  write.table(df, file = 
                paste0("/Shared/oleary/functional/UICL/BIDS/derivatives/fmriprep/rest_time2/fmriprep/fd_rest.txt"), 
              sep = '\t', row.names = F, col.names =! file.exists("/Shared/oleary/functional/UICL/BIDS/derivatives/fmriprep/rest_time2/fmriprep/fd_rest.txt"), quote = F, append = T)
}

for (i in 1:length(subject)) {
  confound <- read.table(file = paste0("/Shared/oleary/functional/UICL/BIDS/derivatives/fmriprep/rest_time2/fmriprep/sub-",subject[i],"/ses-",session2[i],"/func/sub-",subject[i],"_ses-",session2[i],"_task-rest_desc-confounds_regressors.tsv"), header = T, stringsAsFactors = F)
  confound$framewise_displacement <- as.numeric(confound$framewise_displacement)
  mean.fd <- mean(confound$framewise_displacement, na.rm = T)
  id <- subject[i]
  ses <- session2[i]
  df <- data.frame(id, ses, mean.fd)
  write.table(df, file = 
                paste0("/Shared/oleary/functional/UICL/BIDS/derivatives/fmriprep/rest_time2/fmriprep/fd_rest.txt"), 
              sep = '\t', row.names = F, col.names =! file.exists("/Shared/oleary/functional/UICL/BIDS/derivatives/fmriprep/rest_time2/fmriprep/fd_rest.txt"), quote = F, append = T)
}
